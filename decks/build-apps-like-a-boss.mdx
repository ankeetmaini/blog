import { themes, Appear, SplitRight, FullScreenCode, Image } from 'mdx-deck'
import Text from './components/Text.js'
import Graph from './components/ParodyGraph.js'
import Giphy from './components/Giphy'
import Progress from './components/Progress'
import Center from './components/CenterInline'


export const theme = {
  ...themes.book,
  colors: themes.dark.colors,
  Provider: Progress
}

[**build app(s) plural - like a boss!**]()

ðŸ‘‹ friends! I'm <Text>**Ankeet Maini**</Text>

<Appear>
  <li>frontend engineer @Flipkart</li>
  <li>
    <Text>@ankeetmaini</Text> (twitter, github, instagram ðŸ¤­)
  </li>
</Appear>

---

Mandatory disclaimer:

<Text>What this talk is not about?</Text>
<ul>
  <Appear>
    <li>lerna</li>
    <li>yarn workspaces</li>
    <li>lerna with yarn workspaces</li>
  </Appear>
</ul>

---

Let's work our way through the usual workflow

<Appear>
  <li>you start creating an app</li>
  <li>done!</li>
  <div>
    <Giphy>https://media.giphy.com/media/Ut6Xbl4kfDcWc/giphy.gif</Giphy>
  </div>
</Appear>

---

Let's work our way through the ~~usual~~ **<Text>real</Text>** workflow

<Appear>
  <li>create a repository</li>
  <li>start writing code...</li>
  <div>
    <Giphy>https://media.giphy.com/media/Ut6Xbl4kfDcWc/giphy.gif</Giphy>
  </div>
</Appear>

---

Let's work our way through the ~~usual~~ ~~real~~ **<Text>actual</Text>** workflow

<li>create a repository</li>
<Appear>
  <li>setup ESLint</li>
  <li>
    latest research trend on ESLint{' '}
    <Text>(data gathered from Github commits all over the world)</Text>
    <sup>*</sup>
  </li>
  <li>...in the next slide</li>
</Appear>

---

<FullScreenCode>
  <Graph
    height={800}
    leftText="time taken"
    loser="entire app code"
    winner="ESLint"
    loserHeight={150}
    winnerHeight={830}
  />
</FullScreenCode>

---

Let's work our way through the ~~usual~~ ~~real~~ **<Text>actual</Text>** workflow

<li>create a repository</li>
<li>setup ESLint</li>
<Appear>
  <li>and if you use TypeScript</li>
  <div>
    <div style={{ marginLeft: 100 }}>- TSLint</div>
  </div>
  <div>
    <div style={{ marginLeft: 100 }}>- @typescript-eslint</div>
  </div>
  <div>
    <div style={{ marginLeft: 100 }}>- TSLint -> @typescript-eslint</div>
  </div>
</Appear>

---

Let's work our way through the ~~usual~~ ~~real~~ **<Text>actual</Text>** workflow

<li>create a repository</li>
<li>setup ESLint</li>
<Appear>
  <li>setup Prettier</li>
  <li>disable ESLint rules which collide with Prettier ðŸ¤£ðŸ¤£</li>
  <li>configure lint-staged</li>
  <li>configure TypeScript/Flow</li>
  <li>BUILD/BUNDLER setup - Webpack</li>
</Appear>

---

Let's work our way through the ~~usual~~ ~~real~~ **<Text>actual</Text>** workflow

<li>...</li>
<li>BUILD/BUNDLER setup - Webpack</li>
<Appear>
  <div>
    <div style={{ marginLeft: 100 }}>- babel</div>
  </div>
  <div>
    <div style={{ marginLeft: 100 }}>
      - directly ts-loader/awesome-typescript-loader
    </div>
  </div>
  <div>
    <div style={{ marginLeft: 100 }}>
      - ts-loader with `babel` and `babel-loader`
    </div>
  </div>
  <li>
    latest research trend on Webpack config{' '}
    <Text>(data gathered from Github commits all over the world)</Text>
    <sup>*</sup>
  </li>
</Appear>

---

<FullScreenCode>
  <Graph
    height={800}
    leftText="complexity"
    loser="quantum physics"
    winner="Webpack configs"
    loserHeight={350}
    winnerHeight={830}
  />
</FullScreenCode>

---

Let's work our way through the ~~usual~~ ~~real~~ **<Text>actual</Text>** workflow

<li>...</li>
<Appear>
  <li>unit test setup - jest</li>
  <li>e2e test setup - cypress/testcafe</li>
  <li>jenkins job pipelines</li>
  <li>deploy scripts</li>
</Appear>

---

<div style={{ margin: -80 }}><Giphy>https://media.giphy.com/media/F458eKi7tpSqQ/giphy.gif</Giphy></div>

---

And if you think this was <Text>**enough**</Text>?

<Appear>
  <li>server infra</li>
  <li>deployment machines</li>
  <li>health checks</li>
  <li>ELBs/VIPs</li>
  <li>alerts</li>
  <li>...</li>
</Appear>

---

Mandatory digression:

What's your code sharing strategy?

---
# <Text>I copy-paste whatever I need, wherever I need. #YOLO</Text>

<Appear>
  <div>
    <Giphy width={800}>https://media.giphy.com/media/iNJmdpZ8gp5sI/giphy.gif</Giphy>
  </div>
</Appear>

---
<div><img style={{height: 200}} src="https://i.imgur.com/ZigwdOa.png"/></div>

<Appear>
  <li><Text>npm publish everything</Text></li>
  <div><img src="https://i.imgur.com/LwSA6oe.png"/></div>
</Appear>

---

Back on track now :P

# My point?

<Appear>
  <li>non-trivial amount of effort for every new app</li>
  <li>new apps keep happening...</li>
  <li>difficult/tedious code sharing</li>
  <li>can it be made simpler</li>
  <li>using the tools we already use?</li>
</Appear>

---

<div style={{ margin: -180 }}><Giphy>https://media.giphy.com/media/10yIEN8cMn4i9W/giphy.gif</Giphy></div>

---

Cram everything into a single repo
<Appear>  
  <div><Giphy width={800}>https://media.giphy.com/media/VR4Xdxj5MXDna/giphy.gif</Giphy></div>
  <div><Center><Text>Not like this friends ðŸ¤ª</Text></Center></div>
</Appear>

---

<li>have a clear simple folder structure which your team can converge on</li>
<Appear>
  <li>divide apps by different routes</li>
  <li><Text>What can go wrong??</Text></li>
</Appear> 
